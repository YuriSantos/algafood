# A URL do banco de dados agora usa a variável de ambiente DB_HOST.
# O valor padrão "localhost" será usado se a variável não estiver definida.
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}/algafood?createDatabaseIfNotExist=true&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=

# Spring Session (Redis)
spring.session.store-type=redis
spring.data.redis.host=localhost
spring.data.redis.port=6379
#spring.redis.password=

spring.jackson.deserialization.fail-on-unknown-properties=true
spring.jackson.deserialization.fail-on-ignored-properties=true

spring.web.resources.add-mappings=false

server.compression.enabled=true

# Email
algafood.email.impl=SES
algafood.email.remetente=seu-email-verificado@example.com
algafood.email.sandbox.destinatario=

# JPA / Hibernate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.type.descriptor.sql=trace

# Security
# A propriedade abaixo deve conter o seu keystore em Base64.
# algafood.jwt.keystore.jks-location=base64:<seu-keystore-em-base64>
algafood.jwt.keystore.password=
algafood.jwt.keystore.keypair-alias=

# Resource Server Opaque Token
algafood.auth.provider-url=http://localhost:8080

# Configurações personalizadas para o Opaque Token (usadas pela classe AlgaFoodSecurityProperties)
algafood.auth.opaque-token.introspection-uri=http://localhost:8080/oauth2/introspect
algafood.auth.opaque-token.client-id=algafood-backend
algafood.auth.opaque-token.client-secret=

# Mantemos as configurações padrão do Spring Security para compatibilidade, se necessário
spring.security.oauth2.resourceserver.opaque-token.introspection-uri=http://localhost:8080/oauth2/introspect
spring.security.oauth2.resourceserver.opaque-token.client-id=algafood-backend
spring.security.oauth2.resourceserver.opaque-token.client-secret=

spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8080/oauth2/jwks

server.forward-headers-strategy=framework

springdoc.oAuthFlow.authorizationUrl=http://127.0.0.1:8080/oauth2/authorize
springdoc.oAuthFlow.tokenUrl=http://127.0.0.1:8080/oauth2/token

springdoc.swagger-ui.oauth.client-id=algafood-web
springdoc.swagger-ui.oauth.client-secret=

springdoc.swagger-ui.oauth.use-pkce-with-authorization-code-grant=true
springdoc.swagger-ui.oauth.use-basic-authentication-with-access-code-grant=true

springdoc.packages-to-scan=com.algaworks.algafood.api
springdoc.paths-to-match=/v1/**

springdoc.enable-hateoas=false

# AWS Configuration
spring.cloud.aws.endpoint=${AWS_ENDPOINT_URL:http://localhost:4566}
algafood.sqs.queue.pedido-status=algafood-pedido-status
algafood.eventbridge.bus=algafood-event-bus
spring.cloud.aws.credentials.access-key=
spring.cloud.aws.credentials.secret-key=
spring.cloud.aws.region.static=us-east-1
spring.cloud.aws.sqs.enabled=true
